{
    "type": "page",
    "title": "job 列表",
    "body": [
      {
        "type": "crud",
        "name": "sample",
        "api": "http://api.hulu4.com/api/v1/job/list",
        "headerToolbar": [
            "reload"
        ],
        "filter": {
          "title": "",
          "mode": "inline",
          "wrapWithPanel": false,
          "submitText": "",
          "className": "m-b-sm",
          "body": [
            {
              "type": "input-text",
              "name": "keywords",
              "placeholder": "通过关键字搜索",
              "addOn": {
                "label": "搜索",
                "type": "submit",
                "className": "btn-success"
              },
              "clearable": true
            }
          ]
        },
        "bulkActions": [
          {
            "label": "刷新",
            "type": "button",
            "actionType": "ajax",
            "api": "http://api.hulu4.com/api/v1/job/list"
          }
        ],
        "affixHeader": true,
        "columnsTogglable": "auto",
        "placeholder": "暂无数据",
        "tableClassName": "table-db table-striped",
        "headerClassName": "crud-table-header",
        "footerClassName": "crud-table-footer",
        "toolbarClassName": "crud-table-toolbar",
        "combineNum": 0,
        "bodyClassName": "panel-default",
        "perPageAvailable": [
          10
        ],
        "messages": {
        },
        "mode": "table",
        "columns": [
          {
            "name": "name",
            "label": "任务名称",
            "sortable": true
          },
          {
            "name": "desc",
            "label": "任务描述",
            "sortable": true
          },
          {
            "name": "command",
            "label": "命令",
            "sortable": true
          },
          {
            "name": "work_path",
            "label": "工作路径",
            "sortable": true
          },
          {
            "name": "status_text",
            "label": "状态",
            "sortable": true
          },
          {
            "name": "trade_status_text",
            "label": "交易状态",
            "sortable": true
          },
          {
            "name": "error_text",
            "label": "错误信息"
          },
          {
            "type": "datetime",
            "name": "created_at",
            "label": "创建时间",
            "sortable": true
          },
          {
            "type": "datetime",
            "name": "updated_at",
            "label": "更新时间",
            "sortable": true
          },
          {
            "type": "operation",
            "label": "操作",
            "width": "",
            "buttons": [
              {
                "type": "button-group",
                "buttons": [
                  {
                    "type": "button",
                    "label": "编辑",
                    "level": "primary",
                    "actionType": "dialog",
                    "dialog": {
                      "title": "编辑",
                      "name": "sample-bulk-edit",
                      "body": {
                        "type": "form",
                        "api": "post:http://api.hulu4.com/api/v1/job/update",
                        "data": {
                          "job_id": "${id}",
                          "name": "${name}",
                          "desc": "${desc}",
                          "command": "${command}",
                          "work_path": "${work_path}"
                        },
                        "body": [
                          {
                            "type": "input-text",
                            "name": "name",
                            "label": "任务名称",
                            "required": true,
                            "inline": false,
                            "description": "",
                            "descriptionClassName": "help-block",
                            "placeholder": "",
                            "addOn": null
                          },
                          {
                            "type": "divider"
                          },
                          {
                            "type": "input-text",
                            "name": "desc",
                            "label": "任务描述",
                            "required": true
                          },
                          {
                            "type": "divider"
                          },
                          {
                            "type": "textarea",
                            "name": "command",
                            "label": "命令",
                            "required": true
                          },
                          {
                            "type": "divider"
                          },
                          {
                            "type": "textarea",
                            "name": "work_path",
                            "label": "工作路径",
                            "required": true
                          }
                        ]
                      }
                    },
                    "visibleOn": "this.status==0"
                  },
                  {
                    "type": "button",
                    "label": "启动",
                    "level": "danger",
                    "actionType": "ajax",
                    "api": {
                      "method": "post",
                      "url": "http://api.hulu4.com/api/v1/job/start",
                      "data": {
                        "job_id": "${id}"
                      }
                    },
                    "confirmText": "您确认要启动?",
                    "visibleOn": "this.status!==2"
                  },
                  {
                    "type": "button",
                    "label": "停止",
                    "level": "danger",
                    "actionType": "ajax",
                    "confirmText": "您确认要停止?",
                    "api": {
                      "method": "post",
                      "url": "http://api.hulu4.com/api/v1/job/stop",
                      "data": {
                        "job_id": "${id}"
                      }
                    },
                    "visibleOn": "this.status===2"
                  },
                  {
                    "type": "button",
                    "label": "开始交易",
                    "level": "primary",
                    "actionType": "ajax",
                    "confirmText": "您确认要开启交易?",
                    "api": {
                      "method": "post",
                      "url": "http://api.hulu4.com/api/v1/job/start_trade",
                      "data": {
                        "job_id": "${id}"
                      }
                    },
                    "visibleOn": "this.status === 2 && this.trade_status===0"
                  },
                  {
                    "type": "button",
                    "label": "结束交易",
                    "level": "danger",
                    "actionType": "ajax",
                    "confirmText": "您确认要停止交易?",
                    "api": {
                      "method": "post",
                      "url": "http://api.hulu4.com/api/v1/job/stop_trade",
                      "data": {
                        "job_id": "${id}"
                      }
                    },
                    "visibleOn": "this.status === 2 && this.trade_status===1"
                  }
                ]
              }
            ],
            "placeholder": "-",
            "fixed": "right"
          }
        ]
      }
    ],
    "name": "job list",
    "toolbar": [
      {
        "type": "button",
        "actionType": "link",
        "link": "/job/new",
        "label": "新增",
        "primary": true
      }
    ]
  }